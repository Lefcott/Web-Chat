<!doctype html>
<html>
  <head>
    <title>Socket.IO chat</title>
    <style>
    	#message {
    		position: absolute;
    		transform: translate(-50%, -100%);
    		top: 100%;
    		left: 50%;
    		width: 80%;
    		height: 80px;
    	}
    	#send {
    		position: absolute;
    		transform: translate(-100%, -100%);
    		top: 100%;
    		left: 100%;
    		width: 10%;
    		height: 80px;
    	}
    </style>
  </head>
  <body>
    <script src="/socket.io/socket.io.js"></script>
    <script src="helper.js"></script>
		<input type = "text" id = "message" placeholder = "Type something" onkeypress = "event.keyCode == 13 ? sendMessage() : 0">
		<input type = "button" id = "send" value = "Send" onclick = "sendMessage()">
		<script>
			const socket = io();
			const message = document.getElementById('message');
			const cmdPrefix = '__set';
			function sendMessage() {
				if (message.value != '') {
					const action = helper.getAction(message.value, helper.actions);
					if (action) {
						helper.executeCommand(action, message.value, socket);
					} else {
						socket.emit('SendMessage', message.value);
					}
				} else{
					message.placeholder = 'Please type something!!';
					setTimeout(function() {
						message.placeholder = 'Type something';
					}, 1000);
				}
			}
		</script>
  </body>
</html>